# Highload Benchmark Service

–î–µ–º–æ - https://rutube.ru/video/private/87e84494199f84fd9b29bf9a77c22e9d/?p=O_BKCIXH3Sfb5M8q0TDvYw
## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ —Å–µ—Ä–≤–∏—Å, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ü—Ä–æ–µ–∫—Ç –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É "—Ö–æ–ª–æ–¥–Ω—ã–º" —á—Ç–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö —Å –¥–∏—Å–∫–∞ (PostgreSQL) –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ "Hot Data" (In-Memory Cache).

–°–µ—Ä–≤–∏—Å –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è API –Ω–∞ NestJS, –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Vue 3 –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ä–µ–¥—É.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- **NestJS (Node.js)** ‚Äî –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è REST API –∏ –ª–æ–≥–∏–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.
- **Vue 3 + Vite** ‚Äî –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å —Å –¥–∞—à–±–æ—Ä–¥–æ–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –Ω–∞–≥—Ä—É–∑–∫–æ–π.
- **PostgreSQL** ‚Äî –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è 50 000+ –∑–∞–ø–∏—Å–µ–π.
- **In-Memory Cache** ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –¥–∞–Ω–Ω—ã–º.
- **Docker & Nginx** ‚Äî –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –∏ —Ä–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏.

---

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –°–ø–æ—Å–æ–± 1: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```sh
    git clone https://github.com/your-username/nest-vue-load-benchmark.git
    cd nest-vue-load-benchmark
    ```

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å —Å –ø–æ–º–æ—â—å—é Docker Compose:**
    ```sh
    docker-compose up --build
    ```

3.  –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –∞–¥—Ä–µ—Å–∞–º:
    -   **Frontend:** [http://localhost:8080](http://localhost:8080)
    -   **Backend API:** [http://localhost:3000](http://localhost:3000)
    -   **Swagger Docs:** [http://localhost:3000/api/docs](http://localhost:3000/api/docs)

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±—ç–∫–µ–Ω–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç **Seeding** (–Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ) –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö 50 000 —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 2-5 —Å–µ–∫—É–Ω–¥.

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ë–µ–Ω—á–º–∞—Ä–∫–∞

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ **"Hot Data"**: –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–ø–µ—Ä–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏) –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ (Heap) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –º–∏–Ω—É—è –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –¥–∏—Å–∫—É –ë–î.

### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ RPS (Requests Per Second)

| –ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ | –†–µ–∂–∏–º –ë–î (Cold Mode) | –†–µ–∂–∏–º –ö—ç—à (Turbo Mode) | –ü—Ä–∏—Ä–æ—Å—Ç |
|-------------------|----------------------|------------------------|---------|
| **–ë—Ä–∞—É–∑–µ—Ä**       | ~48 RPS              | ~65 RPS                | **x1.3**|
| **–°–µ—Ä–≤–µ—Ä**        | ~330 RPS             | **~290 000 RPS** üöÄ    | **x880**|

*   **–ë—Ä–∞—É–∑–µ—Ä:** –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Å–µ—Ç–µ–≤—ã–º —Å—Ç–µ–∫–æ–º –±—Ä–∞—É–∑–µ—Ä–∞ (–º–∞–∫—Å. 6 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π) –∏ HTTP overhead.
*   **–°–µ—Ä–≤–µ—Ä:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –†–µ–∂–∏–º "–ö—ç—à" –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **Memory Bound** —Å–∫–æ—Ä–æ—Å—Ç—å (—Ä–∞–±–æ—Ç–∞ —Å RAM), –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ "–ë–î" —É–ø–∏—Ä–∞–µ—Ç—Å—è –≤ **Disk I/O**.

---

## API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ù–∞–∏–±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API ‚Äî —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π **Swagger UI**, –∫–æ—Ç–æ—Ä—ã–π –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ –∞–¥—Ä–µ—Å—É:

**[http://localhost:3000/api/docs](http://localhost:3000/api/docs)**

### –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

#### 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
-   **`GET /items`**
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.
-   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
    -   `limit` (int, default: 50) ‚Äî –õ–∏–º–∏—Ç –∑–∞–ø–∏—Å–µ–π.
    -   `offset` (int, default: 0) ‚Äî –°–º–µ—â–µ–Ω–∏–µ.
    -   `turbo` (bool, default: false) ‚Äî –í–∫–ª—é—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞.
-   **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å `curl`:**
    ```sh
    curl "http://localhost:3000/items?limit=10&offset=0&turbo=true"
    ```

#### 2. –ó–∞–ø—É—Å–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –±–µ–Ω—á–º–∞—Ä–∫–∞
-   **`GET /items/benchmark`**
-   **–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–≤–µ—Ä–∞ (loopback), –∏—Å–∫–ª—é—á–∞—è —Å–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏.
-   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
    -   `count` (int) ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤.
    -   `concurrency` (int) ‚Äî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤.
    -   `turbo` (bool) ‚Äî –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–∏ –∫—ç—à.
-   **–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —Å `curl`:**
    ```sh
    curl "http://localhost:3000/items/benchmark?count=1000&concurrency=10&turbo=true"
    ```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

-   `docker-compose.yml`: –ï–¥–∏–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (DB, Backend, Frontend).
-   `backend/`: –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ API –Ω–∞ NestJS.
    -   `src/items/`: –ú–æ–¥—É–ª—å —Å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π, —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º.
    -   `Dockerfile`: Multistage-—Å–±–æ—Ä–∫–∞ –Ω–∞ –±–∞–∑–µ Node.js 20 Alpine.
-   `frontend/`: –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ UI –Ω–∞ Vue 3.
    -   `src/components/`: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤.
    -   `nginx.conf`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ SPA.
    -   `Dockerfile`: –°–±–æ—Ä–∫–∞ —Å—Ç–∞—Ç–∏–∫–∏ –∏ —É–ø–∞–∫–æ–≤–∫–∞ –≤ Nginx Alpine.
